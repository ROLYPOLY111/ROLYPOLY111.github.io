---
title: vue前端路由
date: 2022-04-05 14:13:40
tags: [Vue3, 面试]
categories: 技术类-Vue
---

# 实现一个 hash 路由

**HTML 部分**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div class="header">
      <div>
        <a href="#">首页</a>
      </div>
      <div>
        <a href="#about">关于</a>
      </div>
      <div><a href="#me">我的</a></div>
      <div onclick="window.history.go(-1)">返回</div>
    </div>
  </body>
  <style>
    .header {
      background-color: black;
      height: 100px;
      line-height: 100px;
      display: flex;
      color: #fff;
      justify-content: space-around;
    }
    a:link,
    a:hover,
    a:active,
    a:visited {
      color: #fff;
      text-decoration: none;
    }
  </style>
  <script src="./hashroutes.js"></script>
</html>
```

**JS 部分**

```js
class Route {
  constructor() {
    console.log(this);
    this.routes = {};
    this.refresh = this.refresh.bind(this);
    window.addEventListener("load", this.refresh);
    window.addEventListener("hashchange", this.refresh);
  }

  route(path, callback) {
    this.routes[path] = callback || function () {};
  }

  refresh() {
    console.log(this);
    let path = `/${window.location.hash.slice(1) || ""}`;
    console.log(path);
    let cb = this.routes[path];
    cb && cb();
  }
}

let Router = new Route();
let body = document.querySelector("body");
Router.route("/", function (res) {
  body.style.backgroundColor = "red";
});

Router.route("/about", function () {
  body.style.backgroundColor = "blue";
});

Router.route("/me", function () {
  body.style.backgroundColor = "green";
});
```
